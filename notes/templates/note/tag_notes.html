<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head>
    {% load markdown_filter %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Murat Kendir">
    <meta name="theme-color" content="#712cf9">

    <title>Murat Kendir's Knowledge "Basement"</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/album/">
    <link rel="stylesheet" href="../../media/custom.css">
    <link rel="stylesheet" href="../../media/friendly.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> 
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="../../media/favicon.ico">
</head>

<body>
    
<header data-bs-theme="dark">
  <nav class="navbar navbar-expand-lg petrolMavisi">
    <div class="container-fluid">
      <a class="navbar-brand" href="{% url 'home' %}">(ยบUยบ) Murat Kendir</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="{% url 'home' %}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'jobs' %}">Jobs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="{% url 'allnotes' %}">Notes</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<main>
  <div class="bg-body-secondary">
    <div class="row py-3">
      <div class="col text-center">
        <span><b>Note Lists</b> : </span>
        <button class="btn btn-secondary btn-sm dropdown-toggle" id="note_lists" type="button" data-bs-toggle="dropdown" aria-expanded="false">
          Select a list to filter the notes...
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" data-value=0 >All</a></li>
          {% for list in lists.all %}
          <li><a class="dropdown-item" href="#" data-value={{ list.id }} >{{ list.name }}</a></li>
          {% endfor %}
        </ul>
      
      <button class="btn btn-secondary btn-sm" type="button" id="filter_button"><b>Filter</b></button>
      </div>
    </div>
  </div>
  <div class="bg-dark-subtle">
    <div class="row py-3">
      <div class="col text-center">
        <span><b>Tags</b> : </span>
        <button class="btn btn-outline-secondary btn-sm tag" id="tag_button" value=0 type="button">
          All
        </button>
        {% for tag in tags.all %}
        <button class="btn btn-outline-secondary btn-sm tag" id="tag_button" value={{ tag.id }} type="button">
          {{ tag.name }}
        </button>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="album py-5 bg-body-tertiary">
    <div class="container">
		<h2>Latest Notes</h2>
		<hr/>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
        {% for note in notes.all %}
        <div class="col">
          <div class="card shadow-sm">
            {% if note.image.url != None  %}
            <img src="{{ note.image.url }}"/>
            {% else %}
            <div style="font-size:1.5em !important;width:400px;height:300px;overflow:hidden;">
              {{ note.expression|markdown_to_html|safe }}
            </div>
            {% endif %}
            <div class="card-body">
            	<h5 class="card-text">
                {{ note.type_name }} | 
            		<a href="{{ note.id }}">
            		{{ note.title }}
            		</a>
            	</h5>
              <p class="card-text">
                {{ note.summary|safe }}
              </p>
              <small class="card-text float-end">
              	{{ note.pub_date_pretty }}
              </small>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</main>

<footer class="acikKahverengi py-5">
  <div class="container">
    <p class="float-end mb-1">
      <a href="#" class="btn2 my-1 float-end">Back to top</a>
    </p>
    <p>Copyright Murat Kendir {% now "Y" %}</p>
  </div>
</footer>
<script type="text/javascript">
let list_id = null;
let tag_id = null;

$(document).ready(function() {
  // Handle the click event on the dropdown items
  $('.dropdown-item').on('click', function(event) {
      event.preventDefault(); // Prevent the default anchor behavior

      // Get the text of the selected item
      const selectedText = $(this).text();
      
      // Update the button text
      $('#note_lists').text(selectedText);

      // Optionally, you can store the value associated with the selected item
      list_id= $(this).data('value');
      //console.log('Selected value:', list_id); // Log or use as needed
  });

const filter_button = document.getElementById("filter_button")

filter_button.onclick = function () {
    console.log(list_id);
    if (list_id == 0 || list_id == null) {
      location.href = "{% url 'allnotes' %}";
    }
    else {
      location.href = "../list/"+list_id;
    }
};

  // Take the tag buttons and forward to related page
  $('.tag').on('click', function(event) {
      event.preventDefault(); // Prevent the default anchor behavior

      tag_id= $(this).val();
      console.log('Selected value:', tag_id); // Log or use as needed
      if (tag_id == 0 || tag_id == null) {
        location.href = "{% url 'allnotes' %}";
      }
      else {
        location.href = tag_id;
      }
  });
});



</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>
